{% extends "base.html" %}
{% block title %}Attendance History{% endblock %}
{% block content %}
<h2>Attendance History for <span class="text-primary">{{ event.name }}</span></h2>
<p class="text-muted">Event Date: {{ event.start_time|date:"F d, Y" }}</p>

<div class="card shadow-sm">
    <div class="list-group list-group-flush">
        {% for log in attendance_logs %}
            <div class="list-group-item">
                <div class="d-flex w-100 justify-content-between">
                    <h5 class="mb-1">{{ log.athlete.user.get_full_name }}</h5>
                    <span class="badge
                        {% if log.status == 'PRESENT' %}bg-success
                        {% elif log.status == 'ABSENT' %}bg-danger
                        {% elif log.status == 'EXCUSED' %}bg-warning text-dark
                        {% else %}bg-secondary{% endif %}">
                        {{ log.get_status_display }}
                    </span>
                </div>
                {% if log.notes %}
                    <p class="mb-1 fst-italic">Notes: {{ log.notes }}</p>
                {% endif %}
            </div>
        {% empty %}
            <div class="list-group-item">No attendance records found for this event.</div>
        {% endfor %}
    </div>
</div>

<div class="mt-3">
    <a href="{% url 'event-detail' pk=event.pk %}" class="btn btn-secondary">Back to Event Details</a>
</div>
{% endblock %}